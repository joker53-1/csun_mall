<!DOCTYPE HTML>
<html th:lang="#{lang}" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="head">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport"
              content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
        <title th:text="#{co_ceeg_mall}"></title>
        <!--        <link href="/static/pic/favicon.ico" rel="shortcut icon"/>-->

        <link rel="stylesheet" th:href="@{/static/fontawesome/css/all.css}">
        <link rel="stylesheet" th:href="@{/static/owlcarousel/assets/owl.carousel.css}">
        <link rel="stylesheet" th:href="@{/static/owlcarousel/assets/owl.theme.default.css}">
        <link href="/static/css/app.css" rel="stylesheet" type="text/css"/>
        <script th:src="@{/static/js/jquery-3.5.1.min.js}"></script>
        <script th:src="@{/static/owlcarousel/owl.carousel.js}"></script>
        <script th:src="@{/static/js/jquery.cookie.js}"></script>
        <script th:src="@{/static/js/jquery.validate.min.js}" type="text/javascript"></script>
        <script th:src="@{/static/js/additional-methods.min.js}"></script>
        <script src="/static/js/websocket/sockjs.min.js"></script>
        <script src="/static/js/websocket/stomp.min.js"></script>
        <script th:src="@{/static/js/app.js}"></script>
        <script src="/static/js/chat.js"></script>

        <link rel="stylesheet" type="text/css" href="/static/css/chat.css"/>
        <link rel="stylesheet" href="/static/css/app.css"/>
        <link th:href="@{/static/css/app.css}" rel="stylesheet" type="text/css"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport"
              content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}">
        <link href="../static/css/toastr.min.css" rel="stylesheet"/>
        <script th:src="@{/static/js/toastr.min.js}"></script>
        <!-- <script src="js/axios.min.js"></script> -->
    </head>
</th:block>
<th:block th:fragment="header">
    <header>
        <!--        顶部提示框-->
        <div class="header-section">

            <div class="header-section-announcement">
                <div class="container">
                    <!--                    左边内容栏-->
                    <div class="header-section-announcement-wrapper ">
                        <div class="header-section-announcement-wrapper-left ">
                            <div class="header-announcement-column-text">
                                <!--                                <p ><strong th:text="#{co_secure_delivery}">100% Secure delivery</strong>-->
                                <!--                                    <span th:text="#{co_withoutContact}">without contacting the courier</span></p>-->
                            </div>
                        </div>

                        <div class="header-section-announcement-wrapper-right ">

                            <div class="header-wrapper-right-menu">
                                <ul class="header-wrapper-menu-list">
                                    <!--                                    <li><a href="javascript:" th:text="#{co_order_tracking}">Order tracking</a></li>-->
                                    <!--                                    <li><a href="javascript:" th:text="#{co_blog}">blog</a></li>-->
                                </ul>
                            </div>

                            <div class="header-wrapper-right-social">
                                <ul class="header-social-icon">
                                    <li><a th:href="#{co_facebook_link}" target="_blank"><img
                                            src="../static/pic/facebook%20(2).png"
                                            alt=""></a></li>

                                    <li><a th:href="#{co_twitter_link}" target="_blank"><img
                                            src="../static/pic/twitter.png" alt=""></a>
                                    </li>
                                    <li><a th:href="#{co_linkedin_link}" target="_blank"><img
                                            src="../static/pic/linkedin-in.png"
                                            alt=""></a></li>
                                </ul>
                            </div>

                            <div class="header-wrapper-right-selectGroup">
                                <div class="header-selectGroup-ui">
                                    <div class="header-selectGroup-ui-language-Eng">
                                        <a href="javascript:">
                                            <span th:text="#{co_lang}">English</span>
                                            <span class="svg-element-ui">
                                                <svg width="9" height="6" viewBox="0 0 9 6" fill="none"
                                                     xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"
                                                          fill="#5B6C8F"></path>
                                                </svg>
                                            </span>
                                        </a>
                                    </div>
                                    <div class="header-selectGroup-ui-language-Usd">
                                        <a href="javascript:">
                                            <!--                                            <span th:text="#{co_currency}">USD</span>-->
                                            <!--                                            <span class="svg-element-ui">-->
                                            <!--                                                <svg width="9" height="6" viewBox="0 0 9 6" fill="none"-->
                                            <!--                                                     xmlns="http://www.w3.org/2000/svg">-->
                                            <!--                                                    <path fill-rule="evenodd" clip-rule="evenodd"-->
                                            <!--                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"-->
                                            <!--                                                          fill="#5B6C8F"></path>-->
                                            <!--                                                </svg>-->
                                            <!--                                            </span>-->
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--                    右边的关闭符号-->
                    <button id="announcement-bar--close" type="button" aria-label="TopbarClose"
                            class="header-close-btn">
                        <span class="header-close-btn-icon">
<!--                            <img width="22" height="22" src="../static/pic/close.png" alt="">-->
                        </span>
                    </button>

                </div>
            </div>
        </div>

        <!--头部悬浮框-->
        <div class="header-section-nav">
            <div class="header-section-nav-2" style="min-height: 16.7rem;">
                <div class="container header-nav-content">

                    <div class="header-nav-row-top ">
                        <div class="row">
                            <div class="header-nav-left col-3">
                                <a href="/">
                                    <img height="50" src="../static/pic/logo-1.png" alt="">
                                </a>
                            </div>

                            <div class="header-nav-right col-9">
                                <div class="header-nav-right-col">
                                    <div class="header-nav-right-custom-info">
                                        <p>
                                            <span th:text="#{co_need_help}">Need help?</span>
                                            <strong th:text="#{co_phone}">+86-25-52766958</strong>
                                        </p>
                                    </div>

                                    <!--                                    <div class="header-nav-right-form-search col-10">-->
                                    <!--                                        <form action="/search">-->
                                    <!--                                            <input name="q" type="text" th:placeholder="#{co_search}"-->
                                    <!--                                                   autocomplete="off">-->
                                    <!--                                            <button type="submit" class="btn-search">-->
                                    <!--                                                <span class="svg-element-ui">-->
                                    <!--                                                   <img src="../static/pic/seach.png" alt="">-->
                                    <!--                                                </span>-->
                                    <!--                                            </button>-->
                                    <!--                                        </form>-->
                                    <!--                                    </div>-->

                                    <div class="header-nav-right-icons">
                                        <a href="/index/login" id="my" class="header-nav-right-icons-p"><img width="24"
                                                                                                             height="24"
                                                                                                             src="../static/pic/my.png"
                                                                                                             alt=""></a>
                                        <!--                                        <a href="javascript:" class="header-nav-right-icons-p">-->
                                        <!--                                            <span>-->
                                        <!--                                            <img width="24" height="24" src="../static/pic/fav.png" alt="">-->
                                        <!--                                            </span>-->
                                        <!--                                            <span class="number">-->
                                        <!--                                                <span class="number-item">0</span>-->
                                        <!--                                            </span>-->
                                        <!--                                        </a>-->

                                        <!--                                        <a href="javascript:" class="header-nav-right-icons-p">-->
                                        <!--                                            <span>-->
                                        <!--                                            <img width="24" height="24" src="../static/pic/data.png" alt="">-->
                                        <!--                                            </span>-->
                                        <!--                                            <span class="number">-->
                                        <!--                                                <span class="number-item">0</span>-->
                                        <!--                                            </span>-->
                                        <!--                                        </a>-->

                                        <a href="javascript:" class="header-nav-right-icons-p" id="cart">
                                             <span>
                                            <img width="24" height="24" src="../static/pic/cart.png" alt="">
                                            </span>
                                            <span class="number">
                                                <span class="number-item" id="cart_number">0</span>
                                            </span>
                                        </a>

                                        <div class="shopping-cart" id="shoppingCart" style="display: none;">
                                            <div class="dialog"></div>

                                            <div class="shopping-cart-wrapper">
                                                <a href="javascript:" onclick="cartMenuClose()"
                                                   class="shopping-cart-close">
                                                    <svg width="22" height="19" viewBox="0 0 22 19" fill="none"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M17.3805 16.895L2.9182 2.43267C2.6584 2.17286 2.55963 1.92523 2.67128 1.81358L3.71333 0.77153C3.82498 0.659881 4.07262 0.758651 4.33242 1.01845L18.8813 15.5674C19.1411 15.8272 19.2399 16.0748 19.1283 16.1865L18.0862 17.2285C17.9252 17.2163 17.6403 17.1548 17.3805 16.895Z"
                                                              fill="#103178"></path>
                                                        <path d="M4.41928 16.895L18.8816 2.43267C19.1414 2.17286 19.2402 1.92523 19.1285 1.81358L18.0865 0.77153C17.9748 0.659881 17.7272 0.758651 17.4674 1.01845L2.91847 15.5674C2.65866 15.8272 2.55989 16.0748 2.67154 16.1865L3.7136 17.2285C3.87463 17.2163 4.15948 17.1548 4.41928 16.895Z"
                                                              fill="#103178"></path>

                                                    </svg>
                                                </a>

                                                <form action="" class="form-cart" id="order-form">
                                                    <div class="shopping-cart-head">
                                                        <h3>

                                                            <a th:text="#{co_shopping_cart}">Shopping cart</a>
                                                            <a id="cart_number1">(1)</a>

                                                        </h3>
                                                    </div>
                                                    <div class="shopping-cart-body" id="shopping_cart_body">

                                                        <!--                                                        <div class="shopping-cart-body-inner">-->
                                                        <!--                                                            <div class="shopping-cart-body-inner-item">-->
                                                        <!--                                                                <div class="row">-->
                                                        <!--                                                                    <div class="shopping-cart-col-3">-->
                                                        <!--                                                                        <div class="img-style">-->
                                                        <!--                                                                            <a href="javascript:">-->
                                                        <!--                                                                                <img sizes="80px"-->
                                                        <!--                                                                                     src="../static/pic/change/product.png"-->
                                                        <!--                                                                                     alt="">-->
                                                        <!--                                                                            </a>-->
                                                        <!--                                                                        </div>-->
                                                        <!--                                                                    </div>-->
                                                        <!--                                                                    <div class="shopping-cart-col-9">-->

                                                        <!--                                                                        <div class="shopping-cart-product-info">-->
                                                        <!--                                                                            <h6>-->
                                                        <!--                                                                                <a href="javascript:">-->
                                                        <!--                                                                                    <span class="shopping-cart-title">3-layer mask with an elastic band (1 piece)-</span>-->
                                                        <!--                                                                                    <span class="shopping-cart-text">Dark/Large</span>-->
                                                        <!--                                                                                </a>-->
                                                        <!--                                                                            </h6>-->

                                                        <!--                                                                            <div class="shopping-cart-price-info">-->
                                                        <!--                                                                                <div class="shopping-cart-price">-->
                                                        <!--                                                                                    <span class="price">$119.00</span>-->
                                                        <!--                                                                                    <del class="money">$129.00</del>-->
                                                        <!--                                                                                </div>-->

                                                        <!--                                                                                <div class="shopping-cart-qty">-->
                                                        <!--                                                                                    <span>-->
                                                        <!--                                                                                        <span class="number-1">1</span>X-->
                                                        <!--                                                                                        <span class="number-2">item</span>-->
                                                        <!--                                                                                    </span>-->
                                                        <!--                                                                                    <a href="javascript:" th:text="#{co_remove}">Remove</a>-->
                                                        <!--                                                                                </div>-->
                                                        <!--                                                                            </div>-->
                                                        <!--                                                                        </div>-->


                                                        <!--                                                                    </div>-->
                                                        <!--                                                                </div>-->
                                                        <!--                                                            </div>-->
                                                        <!--                                                        </div>-->
                                                        <input id="remove" th:value="#{co_remove}" hidden>

                                                    </div>

                                                    <div class="shopping-cart-footer">
                                                        <div class="shopping-cart-footer-text">
                                                            <div class="shopping-cart-footer-text-row">
                                                                <p>
                                                                    <span th:text="#{co_total}">Total:</span>
                                                                    <span id="total">$0</span>
                                                                </p>

                                                                <a href="javascript:" class="cart-clear-item"
                                                                   onclick="delete_all()" th:text="#{co_remove_all}">Remove
                                                                    all
                                                                    items</a>
                                                            </div>
                                                            <div class="shopping-cart-footer-text-row">
                                                                <button class="btn btn-1 btn-cart-footer" type="submit"
                                                                        name="checkout">
                                                                    <span class="btn-label">Checkout</span>
                                                                    <!--                                                                    checkout-->
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <script>
                                            var cart = document.getElementById('cart');
                                            var shoppingCart = document.getElementById('shoppingCart');
                                            var remove = $('#remove').val()

                                            function changeCurQuantity(that, type) {
                                                let a = $(that).parent("span").find("[name='quantity']").val()

                                                if (a === "" || a == null) {
                                                    a = 1
                                                }
                                                if ("add" === type) {
                                                    $(that).parent("span").find("[name='quantity']").val(++a)

                                                } else {
                                                    if (a == 1) {
                                                        return
                                                    }
                                                    $(that).parent("span").find("[name='quantity']").val(--a)
                                                }
                                                let cid = $(that).parent("span").find("[name='quantity']").attr('cid')
                                                updateCount(that, cid, a)
                                            }

                                            function deal(arg) {
                                                var t = 0;
                                                try {
                                                    t = arg.toString().split(".")[1].length
                                                } catch (e) {
                                                }
                                                return t;
                                            }

                                            function accAdd(arg1, arg2) {
                                                var r1 = deal(arg1);
                                                var r2 = deal(arg2);
                                                var m = Math.pow(10, Math.max(r1, r2))
                                                return (arg1 * m + arg2 * m) / m
                                            }

                                            function accMul(arg1, arg2) {
                                                var m = 0;
                                                m += deal(arg1);
                                                m += deal(arg2);
                                                var r1 = Number(arg1.toString().replace(".", ""));
                                                var r2 = Number(arg2.toString().replace(".", ""));
                                                return (r1 * r2) / Math.pow(10, m)
                                            }

                                            function updateCount(that, cid, count) {
                                                let res = {
                                                    'id': cid,
                                                    'count': count
                                                }
                                                $.ajax({
                                                    url: '/customer/shopcart/update',
                                                    type: 'PUT',
                                                    data: res,
                                                    success: function (response) {
                                                        if (response.status === "SUCCESS") {
                                                            // $('#shopping_cart_body').html('');
                                                            // console.log(document.getElementsByClassName("price").val())
                                                            console.log($(that).parents(".shopping-cart-price-info").find(".price").val());
                                                            $(that).parents(".shopping-cart-price-info").find(".price").html("$" + response.body);
                                                            var d = document.getElementsByClassName("shopping-cart-product-info");
                                                            onClickHander()
                                                        } else
                                                            toastr.error("修改失败")
                                                    }

                                                });

                                            }

                                            function delete_cart(that) {
                                                let tmp = $(that).parent("div").find("[name='quantity']").attr('cid')
                                                $.ajax({
                                                    url: '/customer/shopcart/delete',
                                                    type: 'DELETE',
                                                    data: {'ids': tmp},
                                                    success: function (response) {
                                                        // $('#shopping_cart_body').html('');
                                                        // load_shopcartBody();
                                                        $(that).parents(".shopping-cart-body-inner").remove()
                                                        var d = document.getElementsByClassName("shopping-cart-product-info");
                                                        onClickHander()
                                                    }
                                                });
                                            }

                                            function delete_all(that) {
                                                // let user = localStorage.getItem("user");
                                                // console.log(user_token)
                                                // if (user == null || user == undefined || user == '')
                                                //     window.location.href = "/index/login";
                                                // else {
                                                //     var memberId = {
                                                //         "memberId": JSON.parse(user).id
                                                //     }
                                                $.ajax({
                                                    url: '/customer/shopcart/deleteAll',
                                                    type: 'DELETE',
                                                    data: {},
                                                    success: function (response) {
                                                        $('#shopping_cart_body').html('');
                                                        load_shopcartBody();
                                                        toastr.success("删除成功")
                                                    }

                                                });
                                                // }

                                            }

                                            function load_shopcartBody() {
                                                $.get("/customer/shopcart/list", function (data) {
                                                    if (data.status === "SUCCESS") {
                                                        var cart = data.body;
                                                        // console.log(cart[0].productName)
                                                        $('#shopping_cart_body').html('');
                                                        $("#cart_number1").html('')
                                                        $("#cart_number1").append("(" + cart.length + ")")
                                                        $("#cart_number").html('')
                                                        $("#cart_number").append(cart.length)
                                                        for (i = 0; i < cart.length; i++) {
                                                            // console.log(cart[i].productName)
                                                            var div_body = `<div class="shopping-cart-body-inner">
                                                            <div class="shopping-cart-body-inner-item">
                                                                <div class="row">
                                                                    <div>
                                                                    <label class="am-checkbox am-secondary">
                                                                           <input type="checkbox" name="choose" onclick="onClickHander()" value=${cart[i].id} data-am-ucheck >
                                                                           </label>
                                                                    </div>
                                                                    <div class="shopping-cart-col-3">
                                                                        <div class="img-style">
                                                                            <a href="javascript:">
                                                                                <img sizes="80px"
                                                                                     src="${cart[i].pic}"
                                                                                     alt="">
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="shopping-cart-col-9">

                                                                        <div class="shopping-cart-product-info">
                                                                            <h6>
                                                                                <a href="javascript:">
                                                                                    <span class="shopping-cart-title">${cart[i].productName}</span>
<!--                                                                                    <span class="shopping-cart-text">Dark/Large</span>-->
                                                                                </a>

                                                                            </h6>

                                                                            <div class="shopping-cart-price-info">
                                                                                <div class="shopping-cart-price">
                                                                                    <span class="price" style="text-align: left">$${cart[i].curPrice}

                                                                                    </span>
<!--                                                                                    <del class="money">$129.00</del>-->

                                                                                </div>

                                                                                <div class="">


                                                                                    <span class="shopping-cart-qty">
                                                                                        <a href="javascript:void(0);" onclick="changeCurQuantity(this,'sub')"  class="qty-minus">-</a>
                                                                                        <input class="cid" type="number" name="quantity" cid = ${cart[i].id} value="${cart[i].quantity}" min="1">
                                                                                        <a href="javascript:void(0);" onclick="changeCurQuantity(this,'add')" class="qty-plus">+</a>
<!--<a href="javascript:" class="cart-clear-item" style="text-align: right">${remove}</a>-->
                                                                                    </span>
                                                                                     <a href="javascript:" class="cart-delete" onclick="delete_cart(this)">${remove}</a>

                                                                                </div>

                                                                            </div>
                                                                        </div>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>`
                                                            // total += cart[i].quantity * cart[i].curPrice
                                                            $("#shopping_cart_body").append(div_body);
                                                        }
                                                        onClickHander()
                                                        openCid()
                                                        shoppingCart.style = 'bolck';
                                                    } else {
                                                        window.location.href = "/index/login";
                                                        // toastr.error("加载失败")
                                                    }

                                                })

                                            }


                                            cart.onmousedown = function () {
                                                load_shopcartBody();
                                            }

                                            function openCid() {
                                                $(".cid").on("change", function () {
                                                    let a = $(this).attr("cid")
                                                    // alert($(this).val())
                                                    updateCount(this, a, $(this).val())
                                                    // console.log(a)
                                                })
                                            }

                                            function onClickHander() {
                                                var checkBox = $("#order-form input:checkbox");
                                                var cartIds = []
                                                checkBox.each(function () {
                                                    if ($(this).is(':checked')) {
                                                        cartIds.push($(this).attr('value'))
                                                    }
                                                })
                                                $.ajax({
                                                    url: '/order/total',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    data: {'cartIds': cartIds.toLocaleString()},
                                                    success: function (data) {
                                                        if (data.status === "SUCCESS") {
                                                            $('#total').html('');
                                                            $("#total").append("$" + data.body);
                                                        } else {
                                                            toastr.error("获取价格失败")
                                                        }
                                                    }
                                                })
                                            }

                                            $("#order-form").submit(function () {
                                                var checkBox = $("#order-form input:checkbox");
                                                var cartIds = []
                                                checkBox.each(function () {
                                                    if ($(this).is(':checked')) {
                                                        cartIds.push($(this).attr('value'))
                                                    }
                                                })
                                                $.ajax({
                                                    url: '/order/create',
                                                    type: 'POST',
                                                    dataType: 'json',
                                                    data: {'cartIds': cartIds.toLocaleString()},
                                                    success: function (data) {
                                                        if (data.status === "SUCCESS") {
                                                            load_shopcartBody()
                                                            toastr.success("下单成功")
                                                        } else {
                                                            toastr.error("下单失败")
                                                        }
                                                    }
                                                })
                                                return false;

                                            })

                                        </script>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="header-nav-row-center header-nav-row ">
                        <div class="header-border"></div>
                    </div>

                    <div class="header-nav-row-bottom header-nav-row">
                        <div class="row">
                            <div class="header-nav-row-bottom-col col-12">
                                <div class="header-bottom-col-left">
                                    <products-types>
                                        <div class="header-bottom-main-menu">
                                            <div class="header-bottom-main-nav-item" id="headerMenuOpen">
                                                <a href="javascript:">
                                            <span class="svg-element">
                                                <svg width="18" height="16" viewBox="0 0 18 16" fill="none"
                                                     xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M17.2 3.8H0.5C0.2 3.8 0 3.6 0 3.3V0.5C0 0.2 0.2 0 0.5 0H17.3C17.6 0 17.8 0.2 17.8 0.5V3.3C17.7 3.6 17.5 3.8 17.2 3.8Z"
                                                          fill="#103178"></path>
                                                    <path d="M17.2 9.8H0.5C0.2 9.8 0 9.6 0 9.3V6.5C0 6.2 0.2 6 0.5 6H17.3C17.6 6 17.8 6.2 17.8 6.5V9.3C17.7 9.5 17.5 9.8 17.2 9.8Z"
                                                          fill="#103178"></path>
                                                    <path d="M17.2 15.7H0.5C0.2 15.7 0 15.5 0 15.2V12.4C0 12.1 0.2 11.9 0.5 11.9H17.3C17.6 11.9 17.8 12.1 17.8 12.4V15.2C17.7 15.5 17.5 15.7 17.2 15.7Z"
                                                          fill="#103178"></path>
                                                </svg>
                                            </span>
                                                </a>
                                            </div>

                                            <div class="header-menu-open" id="Open" style="display:none;">
                                                <div class="dialog"></div>
                                                <div class="header-menu-open-wrapper">
                                                    <a href="#" onclick="headerMenuClose()"
                                                       class="header-menu-close-button">
                                                        <svg width="22" height="19" viewBox="0 0 22 19" fill="none"
                                                             xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M17.3805 16.895L2.9182 2.43267C2.6584 2.17286 2.55963 1.92523 2.67128 1.81358L3.71333 0.77153C3.82498 0.659881 4.07262 0.758651 4.33242 1.01845L18.8813 15.5674C19.1411 15.8272 19.2399 16.0748 19.1283 16.1865L18.0862 17.2285C17.9252 17.2163 17.6403 17.1548 17.3805 16.895Z"
                                                                  fill="#fff"></path>
                                                            <path d="M4.41928 16.895L18.8816 2.43267C19.1414 2.17286 19.2402 1.92523 19.1285 1.81358L18.0865 0.77153C17.9748 0.659881 17.7272 0.758651 17.4674 1.01845L2.91847 15.5674C2.65866 15.8272 2.55989 16.0748 2.67154 16.1865L3.7136 17.2285C3.87463 17.2163 4.15948 17.1548 4.41928 16.895Z"
                                                                  fill="#fff"></path>

                                                        </svg>
                                                    </a>
                                                    <div class="header-menu-open-wrapper-list">
                                                        <div class="header-menu-open-wrapper-list-row-1">
                                                            <div class="header-menu-open-wrapper-list-row-one">
                                                                <ul>
                                                                    <li class="header-menu-open-wrapper-list-row-one-link">
                                                                        <a href="/" th:text="#{co_pages}">Pages</a>
                                                                        <span class="svg-element-ui">
                                                                        <svg width="4" height="8" viewBox="0 0 4 8"
                                                                             fill="none"
                                                                             xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M2.1 4.05596L0 6.65996L0.7 7.28996L3.36 3.99996L0.7 0.709961L0 1.33996L2.1 4.05596Z"
                                                                              fill="#5B6C8F"></path>
                                                                        </svg>
                                                                    </span>
                                                                    </li>
                                                                    <li class="header-menu-open-wrapper-list-row-one-link"
                                                                        th:each="productType : ${productTypeList}">
                                                                        <a th:href="@{'/productlist?typeCode='+ ${productType.id}}"
                                                                           th:text="${productType.name}">Products</a>
                                                                        <span class="svg-element-ui">
                                                                        <svg width="4" height="8" viewBox="0 0 4 8"
                                                                             fill="none"
                                                                             xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M2.1 4.05596L0 6.65996L0.7 7.28996L3.36 3.99996L0.7 0.709961L0 1.33996L2.1 4.05596Z"
                                                                              fill="#5B6C8F"></path>
                                                                        </svg>
                                                                    </span>
                                                                    </li>


                                                                    <li class="header-menu-open-wrapper-list-row-one-link">
                                                                        <a href="/contact" th:text="#{co_contact}">Contact</a>
                                                                        <span class="svg-element-ui">
                                                                        <svg width="4" height="8" viewBox="0 0 4 8"
                                                                             fill="none"
                                                                             xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M2.1 4.05596L0 6.65996L0.7 7.28996L3.36 3.99996L0.7 0.709961L0 1.33996L2.1 4.05596Z"
                                                                              fill="#5B6C8F"></path>
                                                                        </svg>
                                                                    </span>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                        <div class="header-menu-open-wrapper-list-row-2">
                                                            <div class="header-menu-open-mobile-search-box">
                                                                <div class="header-menu-open-mobile-search-box-r">
                                                                    <form action="">
                                                                        <!--                                                                        <input type="text"-->
                                                                        <!--                                                                               th:placeholder="#{co_search}"-->
                                                                        <!--                                                                               autocomplete="off">-->
                                                                        <!--                                                                        <button type="submit" class="btn btn-search">-->
                                                                        <!--                                                                        <span class="svg-element-open">-->
                                                                        <!--                                                                            <svg t="1628228695470" class="icon"-->
                                                                        <!--                                                                                 viewBox="0 0 1024 1024" version="1.1"-->
                                                                        <!--                                                                                 xmlns="http://www.w3.org/2000/svg"-->
                                                                        <!--                                                                                 p-id="3627" width="32" height="32"><path-->
                                                                        <!--                                                                                    d="M981.504 910.848l-147.456-147.456a450.304 450.304 0 0 0 100.864-284.16C934.912 229.376 731.648 25.6 481.28 25.6S27.648 228.864 27.648 479.232s203.264 453.632 453.632 453.632c105.472 0 202.752-36.352 280.064-97.28l147.968 147.968c10.24 10.24 23.04 14.848 36.352 14.848s26.112-5.12 36.352-14.848c19.456-19.968 19.456-52.736-0.512-72.704zM130.048 479.232c0-193.536 157.696-351.232 351.232-351.232s351.232 157.696 351.232 351.232-157.696 351.232-351.232 351.232-351.232-157.696-351.232-351.232z"-->
                                                                        <!--                                                                                    fill="#103178"-->
                                                                        <!--                                                                                    p-id="3628"></path></svg>-->
                                                                        <!--                                                                        </span>-->
                                                                        <!--                                                                        </button>-->
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="header-menu-open-wrapper-list-row-3">
                                                            <div class="header-menu-open-wrapper-list-language">
                                                                <div class="header-menu-open-wrapper-list-language-EN">
                                                                    <a href="javascript:">
                                                                        <span th:text="#{co_lang}">English</span>

                                                                        <span class="svg-element-ui">
                                                                    <svg width="9" height="6" viewBox="0 0 9 6"
                                                                         fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"
                                                                          fill="#5B6C8F"></path>
                                                                    </svg>
                                                                </span>
                                                                    </a>
                                                                </div>
                                                                <!--                                                                <div class="header-menu-open-wrapper-list-language-USD">-->
                                                                <!--                                                                    <a href="javascript:">-->
                                                                <!--                                                                        <span th:text="#{co_currency}">USD</span>-->

                                                                <!--                                                                        <span class="svg-element-ui">-->
                                                                <!--                                                                    <svg width="9" height="6" viewBox="0 0 9 6"-->
                                                                <!--                                                                         fill="none" xmlns="http://www.w3.org/2000/svg">-->
                                                                <!--                                                                    <path fill-rule="evenodd" clip-rule="evenodd"-->
                                                                <!--                                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"-->
                                                                <!--                                                                          fill="#5B6C8F"></path>-->
                                                                <!--                                                                    </svg>-->
                                                                <!--                                                                </span>-->
                                                                <!--                                                                    </a>-->
                                                                <!--                                                                </div>-->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <script>
                                                var headerMenuOpen = document.getElementById('headerMenuOpen');
                                                var Open = document.getElementById('Open');
                                                headerMenuOpen.onmousedown = function () {
                                                    Open.style = 'bolck';
                                                }
                                            </script>


                                            <div class="header-bottom-main-nav-item">
                                                <a href="/">
                                                    <span th:text="#{co_pages}">Pages</span>
                                                </a>
                                            </div>

                                            <div th:each="productType : ${productTypeList}" class="has_sub_menu">
                                                <a class="publichead_nav_li_a"
                                                   th:href="@{'/productlist?typeCode='+ ${productType.id}}">
                                                    <span th:text="${productType.name}">Products</span>
                                                    <!--                                            <span class="triangle"></span>-->
                                                </a>


                                                <div class="sub_menu">
                                                    <div>
                                                        <th:block th:each="productChildType : ${productType.children}">
                                                            <a th:href="@{'/productlist?typeCode='+ ${productChildType.id}}"
                                                               th:text="${productChildType.name}">
                                                                module</a>
                                                        </th:block>
                                                    </div>
                                                </div>
                                            </div>


                                            <!--                                            <div class="header-bottom-main-nav-item">-->
                                            <!--                                                <a href="javascript:">-->
                                            <!--                                                    <span>Transformer</span>-->
                                            <!--                                                </a>-->
                                            <!--                                            </div>-->

                                            <!--                                            <div class="header-bottom-main-nav-item">-->
                                            <!--                                                <a href="javascript:">-->
                                            <!--                                                    <span>Energy storage</span>-->
                                            <!--                                                </a>-->
                                            <!--                                            </div>-->

                                            <!--                                    <div class="header-bottom-main-nav-item">-->
                                            <!--                                        <a href="javascript:">-->
                                            <!--                                            <span>Collections</span>-->
                                            <!--                                        </a>-->
                                            <!--                                    </div>-->

                                            <div class="header-bottom-main-nav-item">
                                                <a href="contact">
                                                    <span th:text="#{co_contact}">Contact</span>
                                                </a>
                                            </div>

                                        </div>
                                    </products-types>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-section-nav-mobile-2">
                <div class="header-section-nav-mobile-2-content">
                    <div class="container">

                        <div class="header-mobile-row-1">
                            <div class="row">
                                <div class="header-mobile-col-1 col-6">
                                    <div class="header-mobile-logo-wrapper">
                                        <a href="javascript:"> <img height="50" src="../static/pic/logo-1.png"
                                                                    alt=""></a>
                                    </div>
                                </div>
                                <div class="header-mobile-col-2 col-6">
                                    <div class="header-mobile-col-2-right">
                                        <div class="header-mobile-ui">
                                            <div class="header-mobile-ui-language-Eng">
                                                <a href="javascript:">
                                                    <span th:text="#{co_lang}">English</span>
                                                    <span class="svg-element-ui">
                                                <svg width="9" height="6" viewBox="0 0 9 6" fill="none"
                                                     xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"
                                                          fill="#5B6C8F"></path>
                                                </svg>
                                            </span>
                                                </a>
                                            </div>
                                            <div class="header-mobile-ui-language-Usd">
                                                <a href="javascript:">
                                                    <span th:text="#{co_currency}">USD</span>
                                                    <span class="svg-element-ui">
                                                    <svg width="9" height="6" viewBox="0 0 9 6" fill="none"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                          d="M4.01529 2.98179L1.35057 0.317078L0 1.66765L4.01529 5.68294L8.03057 1.66765L6.68 0.317078L4.01529 2.98179Z"
                                                          fill="#5B6C8F"></path>
                                                </svg>
                                            </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="header-mobile-row-2">
                            <div class="row">
                                <div class="header-mobile-form-search col-12">
                                    <form action="/search">
                                        <input name="q" type="text" th:placeholder="#{co_search}"
                                               autocomplete="off">
                                        <button type="submit" class="btn-search">
                                                <span class="svg-element-ui">
                                                   <img src="../static/pic/seach.png" alt="">
                                                </span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </header>
    <script type="text/javascript">

        $(document).ready(function () {

            let cookie = $.cookie('user_token')
            if (cookie == null || cookie === '') {

            } else {

                // console.log(cookie)
                let user = localStorage.getItem("user");
                // console.log(user_token)
                let user_data;
                if (user == null || user === '') {
                    user_data = $.get("/customer/passport/getUserId")
                    localStorage.setItem("user", user_data);
                } else
                    user_data = JSON.parse(user);
                $("#my").html(user_data.username).attr("href", "/admin");

                // var memberId = {
                //     "memberId": JSON.parse(user).id
                // }
                $.get("/customer/shopcart/getcartproductnum", function (data) {
                    if (data.status === "SUCCESS") {
                        $("#cart_number").html('')
                        $("#cart_number").append(data.body)
                    }

                })
            }

            let messageId = localStorage.getItem("messageId");
            if (messageId === undefined || messageId === null) {

            } else {

                let req = {
                    'messageId': messageId,
                    'userId': ''
                }
                $.ajax({
                    url: '/message/adduserid',
                    type: 'PUT',
                    data: req,
                    success: function (response) {
                        if (response.status === "SUCCESS") {
                            localStorage.removeItem("messageId")
                            localStorage.setItem("messageId", response.body)
                        } else {
                            localStorage.removeItem("messageId")
                        }
                    }

                });
            }


        });
    </script>
</th:block>

